<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>홈 - LLM Chat</title>
        <link rel="stylesheet" href="./style.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    </head>
    <body class="home-page">
        <nav class="main-nav">
            <div class="nav-content">
                <div class="nav-left">
                    <h1>LLM Chat</h1>
                </div>
                <div class="nav-right">
                    <span id="user-nickname">사용자</span>
                    <a href="/chat" class="nav-button"><i class="fas fa-comments"></i> 채팅하기</a>
                    <button id="logout-button" class="nav-button"><i class="fas fa-sign-out-alt"></i> 로그아웃</button>
                </div>
            </div>
        </nav>
        <main class="home-content">
            <section class="welcome-section">
                <h2>환영합니다! <span id="welcome-nickname">사용자</span>님</h2>
                <p>LLM Chat과 함께 더 스마트한 대화를 시작하세요.</p>
            </section>
            <section class="features-section">
                <div class="feature-card">
                    <i class="fas fa-robot"></i>
                    <h3>다양한 AI 모델</h3>
                    <p>Grok, Gemini 등 다양한 AI 모델과 대화해보세요.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-history"></i>
                    <h3>대화 기록 저장</h3>
                    <p>모든 대화 내용이 안전하게 저장됩니다.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-code"></i>
                    <h3>코드 지원</h3>
                    <p>프로그래밍 관련 질문도 환영합니다.</p>
                </div>
            </section>
            <section class="action-section">
                <a href="/chat" class="start-chat-button"> <i class="fas fa-comments"></i> 지금 시작하기 </a>
            </section>
        </main>
        <script type="module">
            import { checkLoginStatus, getUserInfo, logout } from './js/auth_utils.js';

            // 페이지 초기화
            async function init() {
                // 로그인 체크
                const needLogin = await checkLoginStatus();
                if (needLogin) return;

                // 사용자 정보 표시
                const userInfo = await getUserInfo();
                if (userInfo) {
                    document.getElementById('user-nickname').textContent = userInfo.nickname;
                    document.getElementById('welcome-nickname').textContent = userInfo.nickname;
                }
            }

            // 로그아웃 버튼 이벤트 리스너
            document.getElementById('logout-button').addEventListener('click', logout);

            // 페이지 로드 시 초기화
            init();
        </script>
    </body>
</html>
